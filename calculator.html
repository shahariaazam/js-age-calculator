<!DOCTYPE html>
    <head>
        <title>A little 'Time Since Calculator</title>
        <!-- NOTE:  -->
        <!-- Download the datejs script from http://code.google.com/p/datejs/downloads/list for this calculator to work -->
        <!-- End NOTE -->
    </head>
    <body>
        <h1>Sobriety Calculator</h1>
        
        <p>Enter your dry date: <span id="date_example">(example December 4, 2006)</span></p>
        <form action="#" id="calculator" method="POST">
            <input type="text" name="date_input" id="date_input"/>
            <input type="button" name="submit" value="Do it!" onClick="getTime(true)"/>
        </form>
        
        <div id="results">
        </div>
        
        <script>
	    function buildDisplayString(seconds, minutes, hours, days, months, years) {

                return "<p>You have been sober for:</p><ul><li>" + years + " years, or</li><li>" + months + " months, or</li><li>" + days + " days, or</li><li>" + hours + " hours, or</li><li>" + minutes + " minutes, or</li><li>" + seconds + " seconds, or</li></ul> ";
                
            }
            function getSecondsSince() {
    /* User input variable */
                var dateInput = document.getElementById('date_input');
                var dateValue = dateInput.value;
                
                /* Date objects using date.js */
                var today = new Date();
                var dryDate = Date.parse(dateValue);
                var timeSince = today - dryDate;

				return timeSince;

	    	}
            function getTime(setupTimer) {
                            
				var timeSince = getSecondsSince();
                /* The calculations */
                var seconds = Math.floor(timeSince /1000) % 60;
                var minutes = Math.floor(timeSince / 1000 / 60) % 60;
                var hours = Math.floor(timeSince / 1000 / 60 / 60) % 24;
                var days = Math.floor(timeSince / 1000 / 60 / 60 / 24) % 30;
                var months = Math.floor(timeSince / 1000 / 60 / 60 / 24 / 30) % 12;
                var years = Math.floor(timeSince / 1000 / 60 / 60/ 24 / 365);

				if ( setupTimer )
				{
					setInterval(testIntervals, 1000);
                }
				return document.getElementById('results').innerHTML=buildDisplayString(seconds, minutes, hours, days, months, years);
                
            }
	    	function testIntervals() {

				getTime(false);
            }
        </script>  
    </body>
    
</html>
